{% extends "users/base.html" %}
{% load static %}

{% block title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî {{ post_name }}{% endblock %}

{% block content %}
<div class="container py-4">
    <a href="{% url 'assembly_post_table' %}?post={{ post_name }}" class="btn btn-outline-secondary mb-4">‚Üê –ù–∞–∑–∞–¥ –∫ —Ç–∞–±–ª–∏—Ü–µ</a>
    <h3 class="mb-4 text-center">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ ‚Äî {{ post_name }}</h3>

    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-info">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <form method="post" class="card p-4 shadow-sm">
        {% csrf_token %}

        <div class="mb-3">
            <label class="form-label">VIN</label>
            <input type="text" name="vin_number" class="form-control" required value="{{ entry.vin_number }}">
        </div>

        <div class="mb-3">
            <label class="form-label">–î–∞—Ç–∞ –æ—Å–º–æ—Ç—Ä–∞</label>
            <input type="text" class="form-control" value="{{ entry.date_display }}" readonly>
        </div>

        <div class="mb-3">
            <label class="form-label">–ï—Å—Ç—å –ª–∏ –¥–µ—Ñ–µ–∫—Ç?</label><br>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="has_defect" id="defect_yes" value="yes"
                       {% if entry.has_defect == "yes" %}checked{% endif %}>
                <label class="form-check-label" for="defect_yes">–î–∞</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="has_defect" id="defect_no" value="no"
                       {% if entry.has_defect != "yes" %}checked{% endif %}>
                <label class="form-check-label" for="defect_no">–ù–µ—Ç</label>
            </div>
        </div>

        <div class="mb-3">
            <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ –¥–µ—Ñ–µ–∫—Ç–∞</label>
            <textarea name="defect_description" rows="4" class="form-control">{{ entry.defect_description }}</textarea>
        </div>

        {% if entry.defect_photos %}
        <div class="mb-3">
            <label class="form-label">–§–æ—Ç–æ –¥–µ—Ñ–µ–∫—Ç–∞</label>
            <div class="d-flex flex-wrap gap-2">
                {% for photo in entry.defect_photos %}
                    <img src="{{ photo }}" alt="–§–æ—Ç–æ –¥–µ—Ñ–µ–∫—Ç–∞" class="img-thumbnail" style="max-height: 120px;">
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <button type="submit" class="btn btn-primary w-100">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
    </form>
</div>
{% endblock %}